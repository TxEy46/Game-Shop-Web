<app-header></app-header>

<mat-menu #userMenu="matMenu" class="custom-menu">
  <button mat-menu-item (click)="goToProfile()">
    <span>üë§ ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</span>
  </button>
  <button mat-menu-item (click)="goToWallet()">
    <span>üí∞ ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÄ‡∏á‡∏¥‡∏ô</span>
  </button>
  <button mat-menu-item (click)="goToLibrary()">
    <span>üéÆ ‡∏Ñ‡∏•‡∏±‡∏á‡πÄ‡∏Å‡∏°</span>
  </button>
  <button mat-menu-item (click)="logout()">
    <span>üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</span>
  </button>
</mat-menu>

<!-- Loading State -->
<div *ngIf="isLoading" class="loading">
  <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>
</div>

<div *ngIf="!isLoading" class="shop-container">
  <div class="slider-container">
    <div class="slider">
      <div class="slide" *ngFor="let slide of slides; let i = index" [class.active]="i === currentSlide">
        <img [src]="slide.image_url" [alt]="slide.title">
        <div class="caption">{{ slide.title }}</div>
      </div>
    </div>
  </div>

  <div class="ranking-section" *ngIf="ranking.length">
    <h2>üî• ‡πÄ‡∏Å‡∏°‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ</h2>
    <div class="ranking-list">
      <div class="ranking-card" *ngFor="let game of ranking; let i = index" (click)="goToGameDetail(game.id)">
        <div class="rank-number">{{ i + 1 }}</div>
        <img [src]="game.image_url" [alt]="game.name">
        <div class="info">
          <h3>{{ game.name }}</h3>
          <p>‡∏Ç‡∏≤‡∏¢‡πÑ‡∏õ {{ game.sales_count || 0 }} ‡∏ä‡∏¥‡πâ‡∏ô</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Games Section -->
  <div class="games-section">
    <h2 class="section-title">üéÆ ‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ({{ games.length }} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)</h2>

    <!-- Games List -->
    <div class="game-list">
      <div class="game-card" *ngFor="let game of games" (click)="goToGameDetail(game.id)">
        <div class="image-wrapper">
          <img [src]="game.image_url" [alt]="game.name">
          <div class="overlay">
            <h3>{{ game.name }}</h3>
            <p class="price">{{ game.price | number:'1.2-2' }} ‡∏ö‡∏≤‡∏ó</p>
            <p class="category" *ngIf="game.category_name">{{ game.category_name }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>